<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v9.1.6 <https://hydejack.com/>
-->







<head>
  




  <meta name="robots" content="noindex">



  
    
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Document Page | Chiptune93</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Document Page" />
<meta name="author" content="Donkyu Lim" />
<meta property="og:locale" content="en_us,ko_KR" />
<meta name="description" content="Document Page - Personal Project" />
<meta property="og:description" content="Document Page - Personal Project" />
<link rel="canonical" href="http://localhost:4000/project/Project-document-page/" />
<meta property="og:url" content="http://localhost:4000/project/Project-document-page/" />
<meta property="og:site_name" content="Chiptune93" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-20T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Document Page" />
<meta name="google-site-verification" content="h-Kcf1JEo-TX6AcTLtmYiZbGGjnTnIfbgrEukp8n8r0" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Donkyu Lim"},"dateModified":"2021-09-20T00:00:00+09:00","datePublished":"2021-09-20T00:00:00+09:00","description":"Document Page - Personal Project","headline":"Document Page","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/project/Project-document-page/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/img/logo.png"},"name":"Donkyu Lim"},"url":"http://localhost:4000/project/Project-document-page/"}</script>
<!-- End Jekyll SEO tag -->


  

  
    <meta name="keywords" content="tech,developer,java,spring,docker,mysql,oracle,error">
  



  <meta name="theme-color" content="rgb(25,55,71)">


<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">

<meta name="mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Chiptune93">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<meta name="application-name" content="Chiptune93">

<meta name="generator" content="Hydejack v9.1.6" />


<link rel="alternate" href="http://localhost:4000/project/Project-document-page/" hreflang="en-us,ko-kr">

<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Chiptune93" />


<link rel="shortcut icon"    href="/assets/icons/favicon.ico">
<link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png">

<link rel="manifest" href="/assets/site.webmanifest">

<link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com">



<link rel="preload" href="/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG">






<script>!function(r,c){"use strict";function a(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}r.loadJS=function(e,t){var n=c.createElement("script"),e=(n.src=e,t&&a(n,"load",t,{once:!0}),c.scripts[0]);return e.parentNode.insertBefore(n,e),n},r._loaded=!1,r.loadJSDeferred=function(e,t){var n=c.createElement("script");function o(){r._loaded=!0,t&&a(n,"load",t,{once:!0});var e=c.scripts[0];e.parentNode.insertBefore(n,e)}return n.src=e,r._loaded?o():a(r,"load",o,{once:!0}),n},r.setRel=r.setRelStylesheet=function(e){a(c.getElementById(e),"load",function(){this.rel="stylesheet"},{once:!0})}}(window,document);
!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);
!function(w) {
  w._baseURL = '/';
  w._publicPath = '/assets/js/';
  w._noPushState = false;
  w._noDrawer = false;
  w._noNavbar = false;
  w._noToc = false;
  w._noSearch = false;
  w._search = {
    DATA_URL: '/assets/sitedata.json?no-cache',
    STORAGE_KEY: 'mini-search/',
    INDEX_KEY: 'index--2022-08-04T10:23:33+09:00',
  };
  w._clapButton = true;
}(window);</script>


<script async src="/assets/bower_components/MathJax/es5/tex-mml-chtml.js" id="_MathJax"></script>


<!--[if gt IE 8]><!---->

  




<link rel="stylesheet" href="/assets/css/hydejack-9.1.6.css" id="_stylePreload">
<link rel="stylesheet" href="/assets/icomoon/style.css" id="_iconsPreload">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans+KR:wght@200%7CNoto+Sans:400,400i,700,700i&display=swap" id="_fontsPreload">



  <style id="_pageStyle">

html{--accent-color: rgb(79,177,186);--accent-color-faded: rgba(79,177,186,0.5);--accent-color-highlight: rgba(79,177,186,0.1);--accent-color-darkened: #409ba3;--theme-color: rgb(25,55,71)}

</style>


<!--<![endif]-->




</head>

<body class="no-break-layout">
  


<hy-push-state
  id="_pushState"
  replace-selector="#_main"
  link-selector="a[href]:not([href^='/assets/']):not(.external):not(.no-push-state)"
  script-selector="script"
  duration="500"
  hashchange
>
  
  
  <div id="_navbar" class="navbar fixed-top">
  <div class="content">
    <span class="sr-only">Jump to:</span>
    <div class="nav-btn-bar">
      <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened">
        <span class="sr-only">Navigation</span>
        <span class="icon-menu"></span>
      </a>
      <div class="nav-span"></div>
    </div>
  </div>
</div>
<hr class="sr-only" hidden />

  <main
  id="_main"
  class="content layout-post"
  role="main"
>
  <nav id="breadcrumbs" class="screen-only"><ul>
  
  
    <li><a href="/">home</a></li>
    
      <li>
        
          <span>/</span>
          
          
          <a href="/project/">project</a>
        
      </li>
    
      <li>
        
          <span>/</span>
          <span>Project-document-page</span>
        
      </li>
    
  
</ul></nav>
  










<article id="post-project-Project-document-page" class="page post mb6" role="article">
  <header>
    <h1 class="post-title flip-project-title">
      
        Document Page
      
    </h1>

    <div class="post-date">
      
      <span class="ellipsis mr1">
        <time datetime="2021-09-20T00:00:00+09:00">20 Sep 2021</time> in <a href="/project/" class="flip-title">Project</a> on <span>Spa</span>, <span>Project</span>
      </span>
      
    </div>

    
    

    



  
    <p class="note-sm" >
      Document Page - Personal Project

    </p>
  


  </header>

  
    <ul class="large-only" id="markdown-toc">
  <li><a href="#1-개요" id="markdown-toc-1-개요">1. 개요</a>    <ul>
      <li><a href="#1-필요성" id="markdown-toc-1-필요성">1. 필요성</a></li>
      <li><a href="#2-목적" id="markdown-toc-2-목적">2. 목적</a></li>
      <li><a href="#3-사용-기술-스택" id="markdown-toc-3-사용-기술-스택">3. 사용 기술 스택</a></li>
      <li><a href="#4-서비스-구조-초안" id="markdown-toc-4-서비스-구조-초안">4. 서비스 구조 (초안)</a></li>
    </ul>
  </li>
  <li><a href="#2-간단한-화면-설계" id="markdown-toc-2-간단한-화면-설계">2. 간단한 화면 설계</a></li>
  <li><a href="#3-spring-boot-기반-프로젝트-진행" id="markdown-toc-3-spring-boot-기반-프로젝트-진행">3. Spring Boot 기반 프로젝트 진행</a>    <ul>
      <li><a href="#1-필요-dependency-추가" id="markdown-toc-1-필요-dependency-추가">1. 필요 Dependency 추가.</a></li>
      <li><a href="#2-applicationyml-작성" id="markdown-toc-2-applicationyml-작성">2. application.yml 작성</a></li>
    </ul>
  </li>
  <li><a href="#resourceapplicationyml" id="markdown-toc-resourceapplicationyml">/resource/application.yml</a>    <ul>
      <li><a href="#3-log4j-properties-작성" id="markdown-toc-3-log4j-properties-작성">3. log4j properties 작성</a></li>
    </ul>
  </li>
  <li><a href="#resourcelog4j-log4jdbclog4j2propertiesyml" id="markdown-toc-resourcelog4j-log4jdbclog4j2propertiesyml">/resource/log4j. log4jdbc.log4j2.properties.yml</a>    <ul>
      <li><a href="#4-logback-작성" id="markdown-toc-4-logback-작성">4. logback 작성</a></li>
    </ul>
  </li>
  <li><a href="#resourcelogback-springxml" id="markdown-toc-resourcelogback-springxml">/resource/logback-spring.xml</a>    <ul>
      <li><a href="#5-mybatis-config-작성" id="markdown-toc-5-mybatis-config-작성">5. mybatis config 작성</a></li>
    </ul>
  </li>
  <li><a href="#resourcemybatismybatis-configxml" id="markdown-toc-resourcemybatismybatis-configxml">/resource/mybatis/mybatis-config.xml</a>    <ul>
      <li><a href="#6-db-config-java-파일-작성" id="markdown-toc-6-db-config-java-파일-작성">6. DB config java 파일 작성</a></li>
    </ul>
  </li>
  <li><a href="#package-dirconfigdbconfigjava" id="markdown-toc-package-dirconfigdbconfigjava">{package-dir}/config/DBconfig.java</a></li>
  <li><a href="#4-프로젝트-완성-및-운영환경-결정" id="markdown-toc-4-프로젝트-완성-및-운영환경-결정">4. 프로젝트 완성 및 운영환경 결정</a></li>
  <li><a href="#5-완료-및-공유" id="markdown-toc-5-완료-및-공유">5. 완료 및 공유</a></li>
</ul>

<h1 id="1-개요">1. 개요</h1>
<h2 id="1-필요성">1. 필요성</h2>

<p>함수나, 기타 정리가 필요한 부분이 생겼을 때, 보통 문서나 스프레드 시트에 저장하는 것이 보통이었는데 이렇다 보니 체계적으로 정리가 되지 않을 뿐더러, 찾기가 힘들고 평소에 어떤 내용이 담겨져 있는지 확인이 불가능 하였다. 개인적인 용도나 혹은 사내에 공유하기 위한  API Developer Document 처럼 정리할 수 있는 서비스가 있으면 좋겠다고 생각하였다.</p>

<h2 id="2-목적">2. 목적</h2>

<p>목적은 필요성과 같은 맥락으로, 정리가 필요한 함수나 기타 클래스 등을 정리하여 빠르게 내부 인원에게 공유하거나 외부 인원에게 공유가 가능하도록 프로젝트 별 혹은 프레임워크 별로 정리된 문서를 작성 및 공유 하기 위함이다.</p>

<h2 id="3-사용-기술-스택">3. 사용 기술 스택</h2>

<ul>
  <li>
    <p>Front : HTML &amp; Vue.js</p>
  </li>
  <li>
    <p>Back : Spring Boot Framework + Gradle</p>
  </li>
  <li>
    <p>DB : RDB ( MYSQL / ORACLE ) or etc.</p>
  </li>
</ul>

<h2 id="4-서비스-구조-초안">4. 서비스 구조 (초안)</h2>

<p><img src="/assets/img/Project/1-1.png" alt="1-1" /></p>

<p>Spring Boot Framework 구성 시, 트랜잭션과 스프링 시큐리티 정도는 포함하여 구성하려고 생각 중이다.</p>

<p>또한 로그 처리 같은 기본적인 부분도 Boot Project 는 처음이라 공부하면서 진행할 예정이다.</p>

<p>그 외에 추가적으로 서비스를 SPA 방식으로 구성을 할까 생각 중인데, 적용을 할 수 있을 지 의문이다.</p>

<p>위 개념을 가지고 접근해볼 생각이며, 화면설계 부터 차근차근 진행해볼 예정이다.</p>

<h1 id="2-간단한-화면-설계">2. 간단한 화면 설계</h1>
<p>간단하게 생각났던 아이디어 및 화면 내용을 간단하게 파워포인트로 설계해보았다.</p>

<p>추후 진행 또는 한번 더 보면서 수정해 나갈 예정이다.</p>

<p><img src="/assets/img/Project/1-2.png" alt="1-2" /></p>

<p><img src="/assets/img/Project/1-3.png" alt="1-3" /></p>

<p><img src="/assets/img/Project/1-4.png" alt="1-4" /></p>

<p><img src="/assets/img/Project/1-5.png" alt="1-5" /></p>

<p><img src="/assets/img/Project/1-6.png" alt="1-6" /></p>

<p><img src="/assets/img/Project/1-7.png" alt="1-7" /></p>

<p><img src="/assets/img/Project/1-8.png" alt="1-8" /></p>

<p><img src="/assets/img/Project/1-9.png" alt="1-9" /></p>

<p><img src="/assets/img/Project/1-10.png" alt="1-10" /></p>

<p><img src="/assets/img/Project/1-11.png" alt="1-11" /></p>

<h1 id="3-spring-boot-기반-프로젝트-진행">3. Spring Boot 기반 프로젝트 진행</h1>
<p>프로젝트에 DB를 연동해야 해서, 고민을 해본 결과 …</p>

<p>저장될 데이터가 많지 않고, 테이블도 많이 필요한게 아니라서 No SQL 쪽을 알아보았는데 사실상 요금문제가 있어서 어느정도 테스트와 간단한 구현 느낌으로 진행하는데에는 적합하지 않은 것 같아 RDB를 그냥 연동하기로 하였다.</p>

<p>DB는 ORACLE 이며, 우선 ORACLE 로 연결 되는 부분을 확인 후에, MYSQL 까지 연동 가능하게 수정할 예정이다.</p>

<p>우선, 프로젝트 환경은 다음과 같다.</p>

<ul>
  <li>JDK11</li>
  <li>Spring Boot</li>
</ul>

<p>기본적으로 vscode extension 에서 생성하는 부트 프로젝트를 기본적으로 사용하였다.</p>

<p>DB 환경은 HikariCP를 이용하여 Oracle 과 Connection 을 맺고, log4j 를 통해 DB 로그를 출력하는 것으로 하였다. 그리고, DB mapper 연동은 MyBatis 를 통해 진행한다.</p>

<h2 id="1-필요-dependency-추가">1. 필요 Dependency 추가.</h2>
<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter</span>
<span class="n">implementation</span> <span class="nl">group:</span> <span class="s1">'org.mybatis.spring.boot'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'mybatis-spring-boot-starter'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'2.1.4'</span>
	
<span class="c1">// log4j2</span>
<span class="n">implementation</span> <span class="nl">group:</span> <span class="s1">'org.bgee.log4jdbc-log4j2'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'log4jdbc-log4j2-jdbc4.1'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'1.16'</span>   

<span class="c1">// https://mvnrepository.com/artifact/com.oracle.database.jdbc/ojdbc8</span>
<span class="n">implementation</span> <span class="nl">group:</span> <span class="s1">'com.oracle.database.jdbc'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'ojdbc8'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'21.1.0.0'</span>
</code></pre></div></div>

<p>DB 커넥션을 위해서는 ojdbc 또한 필요하다. 버전마다 지원하는 JDK 버전이 다르니 확인이 필요하다.</p>

<h2 id="2-applicationyml-작성">2. application.yml 작성</h2>

<p>보통 프로젝트 생성 후에는 application.properties 로 되어있지만, 편의를 위해 yml 파일로 바꾸었다. 그대로 properties 로 진행해도 상관 없으나, 표기법이 다르다.</p>

<h1 id="resourceapplicationyml">/resource/application.yml</h1>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">spring</span><span class="pi">:</span>
    <span class="na">application</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">springboot-project-name</span>

    <span class="c1"># DB Connection </span>
    <span class="na">datasource</span><span class="pi">:</span>
        <span class="na">hikari</span><span class="pi">:</span>
            <span class="na">jdbc-url</span><span class="pi">:</span> <span class="s">jdbc:log4jdbc:oracle:thin:@{oracle-db-url}</span> <span class="c1"># ex ) localhost:3306:utf8</span>
            <span class="na">driver-class-name</span><span class="pi">:</span> <span class="s">net.sf.log4jdbc.sql.jdbcapi.DriverSpy</span>
            <span class="na">username</span><span class="pi">:</span> <span class="pi">{</span><span class="nv">user-name</span><span class="pi">}</span>
            <span class="na">password</span><span class="pi">:</span> <span class="pi">{</span><span class="nv">user-password</span><span class="pi">}</span>
            <span class="na">maximum-pool-size</span><span class="pi">:</span> <span class="pi">{</span><span class="nv">connection-pool-size</span><span class="pi">}</span>
</code></pre></div></div>

<p>DB연결 정보를 작성한다.</p>

<h2 id="3-log4j-properties-작성">3. log4j properties 작성</h2>

<p>log4j 프로퍼티를 작성한다. 자세한 건 모르겠으나, 보통 이렇게 세팅하고 써서 그대로 가져왔다.</p>

<h1 id="resourcelog4j-log4jdbclog4j2propertiesyml">/resource/log4j. log4jdbc.log4j2.properties.yml</h1>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">log4jdbc.spylogdelegator.name = net.sf.log4jdbc.log.slf4j.Slf4jSpyLogDelegator</span>
<span class="s">log4jdbc.dump.sql.maxlinelength = </span><span class="m">0</span>

<span class="c1">#Disable - Loading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.</span>
<span class="s">log4jdbc.auto.load.popular.drivers = </span><span class="no">false</span>
</code></pre></div></div>

<h2 id="4-logback-작성">4. logback 작성</h2>

<p>로그를 어떤 형식으로 어떻게 출력할 것이며, 로그 레벨을 지정한다.</p>

<h1 id="resourcelogback-springxml">/resource/logback-spring.xml</h1>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
	<span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"STDOUT"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.ConsoleAppender"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">"ch.qos.logback.classic.PatternLayout"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;Pattern&gt;</span>%d{HH:mm} %-5level %logger{36} - %msg%n<span class="nt">&lt;/Pattern&gt;</span>
		<span class="nt">&lt;/layout&gt;</span>
	<span class="nt">&lt;/appender&gt;</span>
	<span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"SAMPLE"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.ConsoleAppender"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;encoder&gt;</span>
			<span class="nt">&lt;pattern&gt;</span>[%d{yyyy-MM-dd HH:mm:ss}:%-3relative][%thread] %-5level %logger{35} - %msg%n<span class="nt">&lt;/pattern&gt;</span>
		<span class="nt">&lt;/encoder&gt;</span>
	<span class="nt">&lt;/appender&gt;</span>

	<span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"{project-package-dir}"</span> <span class="na">level=</span><span class="s">"DEBUG"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"SAMPLE"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/logger&gt;</span>
	<span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">"INFO"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"STDOUT"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/root&gt;</span>
	<span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"jdbc"</span> <span class="na">level=</span><span class="s">"OFF"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"jdbc.sqlonly"</span> <span class="na">level=</span><span class="s">"OFF"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"jdbc.sqltiming"</span> <span class="na">level=</span><span class="s">"DEBUG"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"jdbc.audit"</span> <span class="na">level=</span><span class="s">"OFF"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"jdbc.resultset"</span> <span class="na">level=</span><span class="s">"OFF"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"jdbc.resultsettable"</span> <span class="na">level=</span><span class="s">"DEBUG"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"jdbc.connection"</span> <span class="na">level=</span><span class="s">"OFF"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<h2 id="5-mybatis-config-작성">5. mybatis config 작성</h2>

<p>Mybatis 설정을 작성한다. 필요한 옵션만 검색하여 작성하였다.</p>

<h1 id="resourcemybatismybatis-configxml">/resource/mybatis/mybatis-config.xml</h1>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;settings&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"mapUnderscoreToCamelCase"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- column이 NULL 일 경우에도 출력 --&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"callSettersOnNulls"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- row가 NULL 일 경우에도 출력 --&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"returnInstanceForEmptyRow"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/settings&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<h2 id="6-db-config-java-파일-작성">6. DB config java 파일 작성</h2>

<p>실제로 커넥션 시, 사용할 DataSource 와 Sql Session Template 을 사용하도록 작성한다.</p>

<p>mapper 와 설정 파일 경로를 지정하여 불러오고 찾을 수 있도록 한다.</p>

<h1 id="package-dirconfigdbconfigjava">{package-dir}/config/DBconfig.java</h1>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.sql.DataSource</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.zaxxer.hikari.HikariDataSource</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSessionFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.spring.SqlSessionFactoryBean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.spring.SqlSessionTemplate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.mybatis.spring.annotation.MapperScan</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.context.properties.ConfigurationProperties</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.jdbc.DataSourceBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.Resource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.support.PathMatchingResourcePatternResolver</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@MapperScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="s">"{repositoey-dir}"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DatabaseConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="nd">@ConfigurationProperties</span><span class="o">(</span><span class="s">"spring.datasource.hikari"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">DataSource</span> <span class="nf">dataSource</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">DataSourceBuilder</span><span class="o">.</span><span class="na">create</span><span class="o">().</span><span class="na">type</span><span class="o">(</span><span class="nc">HikariDataSource</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">SqlSessionFactory</span> <span class="nf">sqlSessionFactory</span><span class="o">(</span><span class="nc">DataSource</span> <span class="n">dataSource</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">SqlSessionFactoryBean</span> <span class="n">sessionFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SqlSessionFactoryBean</span><span class="o">();</span>
        <span class="n">sessionFactory</span><span class="o">.</span><span class="na">setDataSource</span><span class="o">(</span><span class="n">dataSource</span><span class="o">);</span>
        <span class="nc">PathMatchingResourcePatternResolver</span> <span class="n">resolver</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PathMatchingResourcePatternResolver</span><span class="o">();</span>
        <span class="n">sessionFactory</span><span class="o">.</span><span class="na">setMapperLocations</span><span class="o">(</span><span class="n">resolver</span><span class="o">.</span><span class="na">getResources</span><span class="o">(</span><span class="s">"classpath:mapper/*.xml"</span><span class="o">));</span>
        <span class="nc">Resource</span> <span class="n">myBatisConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PathMatchingResourcePatternResolver</span><span class="o">()</span>
                <span class="o">.</span><span class="na">getResource</span><span class="o">(</span><span class="s">"classpath:mybatis/mybatis-config.xml"</span><span class="o">);</span>
        <span class="n">sessionFactory</span><span class="o">.</span><span class="na">setConfigLocation</span><span class="o">(</span><span class="n">myBatisConfig</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">sessionFactory</span><span class="o">.</span><span class="na">getObject</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">SqlSessionTemplate</span> <span class="nf">sqlSessionTemplate</span><span class="o">(</span><span class="nc">SqlSessionFactory</span> <span class="n">sqlSessionFactory</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">SqlSessionTemplate</span> <span class="n">sqlSessionTemplate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SqlSessionTemplate</span><span class="o">(</span><span class="n">sqlSessionFactory</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">sqlSessionTemplate</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>여기까지 작성하고, 각 Service 와 Repository 를 작성하여 실행하면 바로 테스트 및 실행이 가능했다.</p>

<p>각 내용들은 깃헙에 정리하여 올려놓았다.</p>

<p>무언가 바로바로 프로젝트를 생성하여 진행하고 싶을 때, 이런 퀵 스타팅이 가능한 채로 세팅이 되어있으면 좋겠다고 생각해서 이런 내용들을 정리할 때마다 깃헙에 올려놓고 쓰면 좋을 것 같다.</p>

<p>https://github.com/Chiptune93/Library/tree/main/Spring/QuickStart/SpringBoot/JDK11/Mybatis%2BHikariCP%2BOracle</p>

<h1 id="4-프로젝트-완성-및-운영환경-결정">4. 프로젝트 완성 및 운영환경 결정</h1>
<p>프로젝트 기능 구성을 끝내고, 퍼블 작업을 부탁했다. 생각보다 심플하게 나와서 화면 설계 만큼 복잡하게 구성하지 않아도 되었고</p>

<p>로그인 같은 기능도 빼고 대신 관리 기능의 변환을 키보드 입력을 통해 하기로 했다.</p>

<p><img src="/assets/img/Project/1-12.png" alt="1-12" /></p>

<p>이런 식으로 페이지는 완성이 되었고, 이를 이제 어떻게 운영할 것인가에 대한 문제가 남았었다.</p>

<p>최근, 프로젝트 하나를 진행하면서 Docker를 Study 하기도 했고, 회사 내부에서도 이를 위한 서버를 하나 마련한 상태였다. 따라서, 나는 이 프로젝트를 Docker 이미지화 하여 Docker 서버에 올려 운영하기로 했다. 그리고 DB 또한 최근 진행한 프로젝트에서 사용한 Postgresql 을 사용하기로 하고 이것 또한, 서버에 올려놓고 사용하기로 했다.</p>

<p>간단하게 서버에서 작업한 내용은 다음과 같았다.</p>

<ol>
  <li>
    <p>Docker &amp; Docker Compose 설치.</p>
  </li>
  <li>
    <p>Docker Image pull 받기 &gt; Postgresql, 만든 프로젝트의 image</p>
  </li>
  <li>
    <p>Docker run으로 run 시키기.</p>
  </li>
</ol>

<ul>
  <li>Dockerfile
    <div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> adoptopenjdk/openjdk11</span>
<span class="k">EXPOSE</span><span class="s"> 8080:8080</span>
<span class="k">ARG</span><span class="s"> WAR_FILE=build/libs/api.war</span>
<span class="k">COPY</span><span class="s"> ${WAR_FILE} api.war</span>
<span class="k">ENTRYPOINT</span><span class="s"> [ "java", "-jar", "/api.war" ]</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>단순하게 war로 말린 이미지를 run 하는 것이다.</p>

<ul>
  <li>사용한 Command</li>
</ul>

<ol>
  <li>build
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build -t api:1.0 .
</code></pre></div>    </div>
  </li>
  <li>docker run
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -d -p 8080:8080 --name syworks-api api:1.0
</code></pre></div>    </div>
  </li>
  <li>docker push
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker push api:1.0
</code></pre></div>    </div>
  </li>
</ol>

<p>이로써 뭔가 빠르게 빠르게 첫 Spring Boot + Vuejs 프로젝트는 Docker기반으로 운영하기로 하는 바람에 생각보다 금방 끝나게 되었다.</p>

<p>추가적으로, 이번 프로젝트를 운영에 올리면서 nginx를 올려서 여러개 프로젝트를 운영할 수 있게 하는 것을 내부에서 제안하셔서 그것도 고려해보게 되었다. 아마 다음번 개인 프로젝트를 진행하게 된다면 고려해보아야 겠다.</p>

<h1 id="5-완료-및-공유">5. 완료 및 공유</h1>

<p>https://github.com/Chiptune93/DocumentsPage</p>

<p>해당 프로젝트는 개발 종료 하고, 다음 프로젝트를 구상해보겠습니다 :D</p>

  
</article>



  <hr class="dingbat related mb6" />






  
     


  <aside class="about related mt4 mb4" role="complementary">
    
    

<div class="author mt4">
  

  
    


<img
  
    src="/assets/img/logo.png"
    srcset="/assets/img/logo.png 1x,/assets/img/logo.png 2x"
    
  
  alt="Donkyu Lim"
  class="avatar"
  
  width="120"
  height="120"
  loading="lazy"
/>

  

  
  
  <h2  class="page-title hr-bottom">
    About
  </h2>

  <p>2018년 IPP 일학습병행제로 개발을 시작해, 현재까지 웹 백엔드 개발자로 일하고 있습니다.
<br /> 다른 개발자를 위한 내부 서비스 개발 및 문서화 공유에 신경을 많이 쓰는 편입니다.
<br /> 새로운 일을 찾아 나서는 것을 좋아합니다.</p>


  <div class="sidebar-social">
    <span class="sr-only">Social:</span>
<ul>
  
    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://github.com/Chiptune93" title="GitHub" class="no-mark-external">
      <span class="icon-github"></span>
      <span class="sr-only">GitHub</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="mailto:eoen012@gmail.com" title="Email" class="no-mark-external">
      <span class="icon-mail"></span>
      <span class="sr-only">Email</span>
    </a>
  </li>


    
  
</ul>

  </div>
</div>

  </aside>


  

  
  

  
    


  <aside class="related mb4" role="complementary">  <h2 class="hr-bottom">Related Posts</h2>  <ul class="related-posts">                  <li class="h4">  <a href="/server/rclocal/" class="flip-title"><span>CentOS7 - rc.local 활성화 하기</span></a>  <time class="faded fine" datetime="2022-08-03T00:00:00+09:00">03 Aug 2022</time></li>                        <li class="h4">  <a href="/spring/h2-database-csv/" class="flip-title"><span>SpringBoot - H2 Database CSV 데이터 Import 하기</span></a>  <time class="faded fine" datetime="2022-07-29T00:00:00+09:00">29 Jul 2022</time></li>                        <li class="h4">  <a href="/spring/swagger-ui-3.0/" class="flip-title"><span>SpringBoot - Swagger ui 3.0 연동하기</span></a>  <time class="faded fine" datetime="2022-07-18T00:00:00+09:00">18 Jul 2022</time></li>            </ul></aside>

  

  
  

  
    

  


  
<footer class="content" role="contentinfo">
  <hr/>
  
    <p><small class="copyright">© 2021. All rights reserved.
</small></p>
  
  
    <nav class="legal"><small>
    
      
      <a class="heading flip-title" href="/LICENSE/">LICENSE</a>
      |
    
      
      <a class="heading flip-title" href="/NOTICE/">NOTICE</a>
      |
    
      
      <a class="heading flip-title" href="/CHANGELOG/">CHANGELOG</a>
      
    
    </small></nav>
  
    <p><small>Powered by <a class="external" href="https://hydejack.com/">Hydejack</a> v<span id="_version">9.1.6</span></small></p>
  <hr class="sr-only"/>
</footer>


</main>

  <hy-drawer
  id="_drawer"
  class=""
  side="left"
  threshold="10"
  noscroll
  
>
  <header id="_sidebar" class="sidebar" role="banner">
    




<div class="sidebar-bg sidebar-overlay" style="background-color:rgb(25,55,71);background-image:url(/assets/img/sidebar-bg.jpg)"></div>

    <div class="sidebar-sticky">
  <div class="sidebar-about">
    
      <a class="no-hover" href="/" tabindex="-1">
        <img src="/assets/img/logo.png" class="avatar" alt="Chiptune93" width="120" height="120" loading="lazy" />
      </a>
    
    <a class="sidebar-title" href="/"><h2 class="h1">Chiptune93</h2></a>
    
    
      <p class="">
        Per Ardua Ad Astra. Lucete Stellae.

      </p>
    
  </div>

  <nav class="sidebar-nav heading" role="navigation">
    <span class="sr-only">Navigation:</span>
<ul>
  
    
      
      <li>
        <a
          id="_drawer--opened"
          href="/Java/"
          class="sidebar-nav-item "
          
        >
          🚀 Java
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Spring/"
          class="sidebar-nav-item "
          
        >
          🔮 Spring
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Database/"
          class="sidebar-nav-item "
          
        >
          📋 Database
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Server/"
          class="sidebar-nav-item "
          
        >
          💻 Server
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Frontend/"
          class="sidebar-nav-item "
          
        >
          🎆 Frontend
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/AWS/"
          class="sidebar-nav-item "
          
        >
          🎃 AWS
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Docker/"
          class="sidebar-nav-item "
          
        >
          🔌 Docker
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Network/"
          class="sidebar-nav-item "
          
        >
          📧 Network
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Python/"
          class="sidebar-nav-item "
          
        >
          ✨ Python
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/IDE/"
          class="sidebar-nav-item "
          
        >
          💎 IDE
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Error/"
          class="sidebar-nav-item "
          
        >
          🔥 Error
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Etc/"
          class="sidebar-nav-item "
          
        >
          👑 Etc
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Project/"
          class="sidebar-nav-item "
          
        >
          🧭 Project
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/Carrer/"
          class="sidebar-nav-item "
          
        >
          💯 Carrer
        </a>
      </li>
    
  
</ul>

  </nav>

  
  <div class="sidebar-social">
    <span class="sr-only">Social:</span>
<ul>
  
    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://github.com/Chiptune93" title="GitHub" class="no-mark-external">
      <span class="icon-github"></span>
      <span class="sr-only">GitHub</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="mailto:eoen012@gmail.com" title="Email" class="no-mark-external">
      <span class="icon-mail"></span>
      <span class="sr-only">Email</span>
    </a>
  </li>


    
  
</ul>

  </div>
</div>
  </header>
</hy-drawer>
<hr class="sr-only" hidden />

</hy-push-state>


  <!--[if gt IE 10]><!---->
  <script nomodule>!function(){var t,n=document.createElement("script");!("noModule"in n)&&"onbeforeload"in n&&(t=!1,document.addEventListener("beforeload",function(e){if(e.target===n)t=!0;else if(!e.target.hasAttribute("nomodule")||!t)return;e.preventDefault()},!0),n.type="module",n.src=".",document.head.appendChild(n),n.remove())}();
</script>
  <script src="/assets/js/hydejack-9.1.6.js" type="module"></script>
  <script src="/assets/js/LEGACY-hydejack-9.1.6.js" nomodule defer></script>
  

  

<!--<![endif]-->
  <!-- <script>
  document.querySelector('hy-push-state').setAttribute('prefetch', '');

  document.querySelectorAll('.sidebar a[href^="/"]').forEach(function (el) { 
    el.addEventListener('click', function (e) {
      if (el.pathname === window.location.pathname) {
        e.preventDefault();
        e.stopPropagation();
        document.querySelector('hy-drawer').close();
      }
    });
  });
</script> -->

<!--
Code for integrating CloudFlare's email protection with Hydejack's single page app loading.
-->
<script>
  document.getElementById('_pushState').addEventListener('hy-push-state-after', function (e) {
    function e(e){
      (console.error?console.error:console.log).call(console,e)
    }

    function t(e){
      return l.innerHTML='<a href="'+e.replace(/"/g,"&quot;")+'"></a>',l.childNodes[0].getAttribute("href")
    }

    function r(e,t){
      var r=e.substr(t,2);return parseInt(r,16)
    }

    function n(e,n){
      for(var o="",c=r(e,n),a=n+2;a<e.length;a+=2){
        var l=r(e,a)^c;
        o+=String.fromCharCode(l)
      }
      return t(o)
    }

    var o="/cdn-cgi/l/email-protection#",
        c=".__cf_email__",
        a="data-cfemail",
        l=document.createElement("div");

    !function(){
      for(var t=document.getElementsByTagName("a"),r=0;r<t.length;r++)
        try{
          var c=t[r],a=c.href.indexOf(o);
          a>-1&&(c.href="mailto:"+n(c.href,a+o.length))
        }catch(t){
          e(t)
        }
    }(),
    function(){
      for(var t=document.querySelectorAll(c),r=0;r<t.length;r++)
        try{
          var o=t[r],l=n(o.getAttribute(a),0),i=document.createTextNode(l);
          o.parentNode.replaceChild(i,o)
        }catch(t){
          e(t)
        }
    }()
  });
</script>





<div hidden>
  
  <h2 class="sr-only">Templates (for web app):</h2>

  <template id="_animation-template">
  <div class="animation-main fixed-top">
    <nav id="breadcrumbs" class="screen-only"><ul>
  
  
</ul></nav>
    <div class="content">
      <div class="page"></div>
    </div>
  </div>
</template>

  <template id="_loading-template">
  <div class="loading nav-btn fr">
    <span class="sr-only">Loading…</span>
    <span class="icon-cog"></span>
  </div>
</template>

  <template id="_error-template">
  <div class="page">
    <h1 class="page-title">Error</h1>
    
    
    <p class="lead">
      Sorry, an error occurred while loading <a class="this-link" href=""></a>.

    </p>
  </div>
</template>

  <template id="_permalink-template">
  <a href="#" class="permalink">
    <span class="sr-only">Permalink</span>
    <span class="content-hash"></span>
  </a>
</template>

</div>


</body>
</html>
